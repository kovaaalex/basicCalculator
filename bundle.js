(()=>{const e=document.querySelectorAll(".number"),n=document.querySelector(".result"),t=document.querySelector(".point"),r=document.querySelectorAll(".operation"),c=document.querySelector(".equal"),i=document.querySelectorAll(".btn"),l=document.querySelector("#clear"),o=["+","−","×","÷","%"],u=document.querySelector("#plus-minus"),a=document.getElementById("theme");let d="",s="0",L="",m=!1,y=!1,M="",H=!1;function T(e){if(y)return f(),n.innerHTML+=e,void(d=e);"."===s[s.length-1]&&(s+="0"),m=!1,d=e,"equal"===M&&""!==s&&""!==L?n.innerHTML=L+e:(L=s,n.innerHTML=s+e),s="",y=!0}function E(){return 0===+s&&(n.innerHTML="Error",i.forEach(e=>{e.disabled=!0,e.style.opacity="0.1"}),l.style.opacity="1",l.disabled=!1,!0)}function f(){switch(d){case"+":L=+L+ +s;break;case"−":L=+L-+s;break;case"×":L=+L*+s;break;case"÷":if(E())return;L=+L/+s;break;case"%":if(E())return;L=+L%+s}n.innerHTML=L}a.addEventListener("click",()=>{a.classList.toggle("night"),document.body.classList.toggle("night__theme")}),e.forEach(e=>e.addEventListener("click",()=>{!function(e){y&&o.includes(n.innerHTML[n.innerHTML.length-1])&&(s=""),"0"===s?s=e:s+=e,n.innerHTML=s}(e.innerHTML),M="number"})),r.forEach(e=>e.addEventListener("click",()=>{T(e.innerHTML),M="operation"})),t.addEventListener("click",()=>{m||(s+=".",n.innerHTML=s,m=!0),M="point"}),c.addEventListener("click",()=>{f(),y=!1,M="equal",H=!0}),l.addEventListener("click",function(){s="0",L="",n.innerHTML="0",m=!1,i.forEach(e=>{e.style.opacity="1",e.disabled=!1}),y=!1,H=!0}),u.addEventListener("click",()=>{"equal"===M?(L=-L,n.innerHTML=L,s=L):""!==s&&(s=-s,n.innerHTML=s),M="plusMinus"})})();