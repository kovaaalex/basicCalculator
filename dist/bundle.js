(()=>{const e=document.querySelectorAll(".number"),n=document.querySelector(".result"),t=document.querySelector(".point"),r=document.querySelectorAll(".operation"),c=document.querySelector(".equal"),i=document.querySelectorAll(".btn"),l=document.querySelector("#clear"),o=["+","−","×","÷","%"],u=document.querySelector("#plus-minus");let a="",d="0",s="",L=!1,m=!1,y="",M=!1;const H=document.getElementById("theme");function T(e){if(m)return f(),n.innerHTML+=e,void(a=e);"."===d[d.length-1]&&(d+="0"),L=!1,a=e,"equal"===y&&""!==d&&""!==s?n.innerHTML=s+e:(s=d,n.innerHTML=d+e),d="",m=!0}function E(){return 0===+d&&(n.innerHTML="Error",i.forEach(e=>{e.disabled=!0,e.style.opacity="0.1"}),l.style.opacity="1",l.disabled=!1,!0)}function f(){switch(a){case"+":s=+s+ +d;break;case"−":s=+s-+d;break;case"×":s=+s*+d;break;case"÷":if(E())return;s=+s/+d;break;case"%":if(E())return;s=+s%+d}n.innerHTML=s}H.addEventListener("click",()=>{H.classList.toggle("night"),document.body.classList.toggle("night__theme")}),e.forEach(e=>e.addEventListener("click",()=>{!function(e){m&&o.includes(n.innerHTML[n.innerHTML.length-1])&&(d=""),"0"===d?d=e:d+=e,n.innerHTML=d}(e.innerHTML),y="number"})),r.forEach(e=>e.addEventListener("click",()=>{T(e.innerHTML),y="operation"})),t.addEventListener("click",()=>{L||(d+=".",n.innerHTML=d,L=!0),y="point"}),c.addEventListener("click",()=>{f(),m=!1,y="equal",M=!0}),l.addEventListener("click",function(){d="0",s="",n.innerHTML="0",L=!1,i.forEach(e=>{e.style.opacity="1",e.disabled=!1}),m=!1,M=!0}),u.addEventListener("click",()=>{"equal"===y?(s=-s,n.innerHTML=s,d=s):""!==d&&(d=-d,n.innerHTML=d),y="plusMinus"})})();